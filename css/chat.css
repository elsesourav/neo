main {
   position: relative;
   width: 100%;
   height: 100%;
   display: flex;
   flex-direction: column;
   overflow: hidden;
   z-index: 3;
}
main header {
   position: relative;
   top: 0;
   width: 100%;
   height: calc(var(--s) * 2.8);
   padding: 0 calc(var(--s) * 3.4);
   background: var(--color-primary);
   display: flex;
   justify-content: flex-start;
   align-items: center;
   border-bottom: solid 2px #110071;
}
main header .icon {
   position: relative;
   width: calc(var(--s) * 2.8);
   height: calc(var(--s) * 2.8);
   display: grid;
   place-items: center;
}
main header .icon img {
   width: 80%;
   height: 80%;
}

main .scroll {
   position: relative;
   width: 100%;
   height: 100%;
   overflow-x: hidden;
   overflow-y: scroll;
}

main .scroll .chat-box {
   position: relative;
   width: 100%;
   height: auto;
   display: flex;
   justify-content: center;
   align-items: center;
   gap: calc(var(--m));
   flex-direction: column;
   padding: calc(var(--m));
   padding-bottom: calc(var(--input-h) + var(--s));
}
main .chat-box * {
   user-select: text;
   -ms-user-select: text;
}
.chat-box .chat {
   position: relative;
   width: 100%;
   height: auto;
   display: flex;
   gap: calc(var(--m) / 4);
}
.chat-box .outgoing {
   justify-content: flex-end;
}
.chat-box .incoming {
   gap: calc(var(--m) / 2);
}
.chat-box .incoming img {
   position: relative;
   height: calc(var(--s) * 2);
   width: calc(var(--s) * 2);
   background: light-dark(#fff8, #0008);
   color: #fcf3f3;
   text-align: center;
   border-radius: 33%;
   padding: calc(var(--m) / 4);
   font-size: calc(var(--font-s) * 1);
   display: grid;
   place-items: center;
}
.chat-box .chat .message {
   position: relative;
   font-size: calc(var(--font-s) * 0.8);
   max-width: 75%;
   padding: calc(var(--m) * 1.4) calc(var(--m) * 2);
   gap: calc(var(--m));
   border-radius: var(--m) var(--m) 0 var(--m);
   color: #fff;
   background: var(--color-primary);
   display: flex;
   flex-direction: column;
}
.chat-box .incoming .message {
   color: light-dark(#333, #ddd);;
   background: light-dark(#ddda, #0003);
   border-radius: 0 var(--m) var(--m) var(--m);
   outline: solid 1px light-dark(#ddda, #0005);
}
.chat-box .incoming .message *:not(code *, pre *) strong {
   color: light-dark(#111, #fff);
}

/* -------- color for prompt ---------- */
.message pre code[class*="language-"] {
   text-shadow: 0 1px #000;
   font-family: f0;
   font-size: calc(var(--font-s) * 0.8);
   text-align: left;
   white-space: pre;
   word-spacing: normal;
   word-break: normal;
   word-wrap: normal;
   -moz-tab-size: 4;
   -o-tab-size: 4;
   tab-size: 4;
   -webkit-hyphens: none;
   -moz-hyphens: none;
   -ms-hyphens: none;
   hyphens: none;
}
.message code[class*="language-"] ::-moz-selection,
.message code[class*="language-"]::-moz-selection,
.message pre[class*="language-"] ::-moz-selection,
.message pre[class*="language-"]::-moz-selection {
   text-shadow: none;
   background: #b3d4fc;
}
.message code[class*="language-"] ::selection,
.message code[class*="language-"]::selection,
.message pre[class*="language-"] ::selection,
.message pre[class*="language-"]::selection {
   text-shadow: none;
   background: #b3d4fc;
}
@media print {
   code[class*="language-"],
   pre[class*="language-"] {
      text-shadow: none;
   }
}
.message pre[class*="language-"]  {
   overflow: auto;
}
.message pre { 
   background: light-dark(var(--code-light), var(--code-dark));
   border-radius: var(--m);
   outline: solid 1px light-dark(#777, #323232);
}
.message :not(pre) > code[class*="language-"] {
   white-space: normal;
   color: light-dark(#333, #fff);
}
.message pre code {
   color: #ddd;
   font-family: f0;
}

.message ul,
.message ol {
   padding: 0 calc(var(--m));
}
.message ul li,
.message ol li {
   margin-left: calc(var(--m));
   padding: calc(var(--m) / 4) 0;
}
.message strong {
   font-family: f6b;
}
.message ul ::marker {
   content: "â—† ";
   font-size: calc(var(--font-s) * 1.2);

   color: light-dark(#0004ff, #2d7dff);
}
.message ol ::marker {
   font-size: calc(var(--font-s) * 0.8);
   font-family: f7b;
   color: light-dark(#9000ff, #ba60ff);
}

.message:not( pre) > p {
   display: inline;
}
.message:not( pre) > p * {
   display: inline;
   height: min-content;
}
.message:not( pre) ul li *,
.message:not( pre) ol li * {
   display: inline;
}


.message code * {
   font-family: f0;
   font-size: calc(var(--font-s) * 0.8);
}
.message code > * {
   line-height: 1.5;
}
.message code {
   display: block;
   overflow-x: auto;
}
.message pre {
   position: relative;
   padding: calc(var(--m));
   border-radius: calc(var(--m) / 2);
}
.message table {
   outline: solid 1px light-dark(#000, #fff);
   border-radius: var(--m);
   overflow: hidden;
}
.message table tr td,
.message table tr th {
   position: relative;
   color: light-dark(#000e, #ffe);
   padding: calc(var(--m));
   outline: solid 1px light-dark(#000, #fff);
   background: light-dark(#fff4, #0004);
}
.message table tr th {
   background: light-dark(#fff8, #0008);
}
.message table tr:first-child {
   border-top-left-radius: var(--m);
   border-top-right-radius: var(--m);
}
.message table tr:first-child th:first-child {
   border-top-left-radius: inherit;
}
.message table tr:first-child th:last-child {
   border-top-right-radius: inherit;
}
.message table tr:last-child {
   border-bottom-left-radius: var(--m);
   border-bottom-right-radius: var(--m);
}
.message table tr:last-child td:first-child {
   border-bottom-left-radius: inherit;
}
.message table tr:last-child td:last-child {
   border-bottom-right-radius: inherit;
}
.message a {
   color: #0080ff;
}

.message pre code .hljs-comment {
   color: #6272A4; 
   font-style: italic;
}
.message pre code .hljs-punctuation {
   color: #F8F8F2;
   font-weight: bold;
}
.message pre code .hljs-tag {
   color: #FFFFFF; 
}
.message pre code .hljs-tag .hljs-attr {
   color: #50FA7B; 
   font-style: italic;
}
.message pre code .hljs-tag .hljs-name {
   color: #FF79C6; 
}
.message pre code .hljs-attribute {
   color: #50FA7B; 
   font-style: italic;
}
.message pre code .hljs-doctag {
   color: #BD93F9; 
}
.message pre code .hljs-keyword {
   color: #FF79C6; 
}
.message pre code .hljs-meta .hljs-keyword {
   color: #FF79C6; 
}
.message pre code .hljs-name {
   color: #8BE9FD; 
}
.message pre code .hljs-selector-tag {
   color: #FF79C6; 
}
.message pre code .hljs-deletion {
   color: #FF5555; 
}
.message pre code .hljs-number {
   color: #BD93F9; 
}
.message pre code .hljs-quote {
   color: #F1FA8C; 
   font-style: italic;
}
.message pre code .hljs-selector-class {
   color: #8BE9FD; 
}
.message pre code .hljs-selector-id {
   color: #8BE9FD; 
}
.message pre code .hljs-string {
   color: #F1FA8C; 
}
.message pre code .hljs-template-tag {
   color: #50FA7B; 
}
.message pre code .hljs-type {
   color: #8BE9FD; 
}
.message pre code .hljs-section {
   color: #BD93F9; 
}
.message pre code .hljs-title {
   color: #BD93F9; 
}
.message pre code .hljs-link {
   color: #8BE9FD; 
   font-style: underline;
}
.message pre code .hljs-operator {
   color: #FF79C6; 
}
.message pre code .hljs-regexp {
   color: #F1FA8C; 
}
.message pre code .hljs-selector-attr {
   color: #50FA7B; 
}
.message pre code .hljs-selector-pseudo {
   color: #50FA7B; 
}
.message pre code .hljs-symbol {
   color: #BD93F9; 
}
.message pre code .hljs-template-variable {
   color: #BD93F9; 
}
.message pre code .hljs-variable {
   color: #F8F8F2; 
}
.message pre code .hljs-literal {
   color: #BD93F9; 
}
.message pre code .hljs-addition {
   color: #50FA7B; 
}
.message pre code .hljs-built_in {
   color: #8BE9FD; 
   font-style: italic;
}
.message pre code .hljs-bullet {
   color: #50FA7B; 
}
.message pre code .hljs-code {
   color: #F1FA8C; 
}
.message pre code .hljs-meta {
   color: #587deb; 
}

.message pre code .hljs-emphasis {
   font-style: italic;
}
.message pre code .hljs-strong {
   font-weight: 900;
}
